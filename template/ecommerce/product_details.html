{% extends '../base.html' %}
{% load static %}
{% block content %}

<div class="card mb-3">
  <div class="card-body">
    <div class="row">
      <div class="col-lg-6 mb-4 mb-lg-0">
        <div class="product-slider" id="galleryTop">
          <div class="swiper-container theme-slider position-lg-absolute all-0" data-swiper='{"autoHeight":true,"spaceBetween":5,"loop":true,"loopedSlides":5,"thumb":{"spaceBetween":5,"slidesPerView":5,"loop":true,"freeMode":true,"grabCursor":true,"loopedSlides":5,"centeredSlides":true,"slideToClickedSlide":true,"watchSlidesVisibility":true,"watchSlidesProgress":true,"parent":"#galleryTop"},"slideToClickedSlide":true}'>
            <div class="swiper-wrapper h-100">
              <div class="swiper-slide h-100">
                <a href="{{product.img.url}}"><img class="rounded-1 fit-cover h-100 w-100" src="{{product.img.url}}" alt="" /></a>
              </div>
              {% for i in gallery %}
                <div class="swiper-slide h-100">
                  <a href="{{product.img.url}}"><img class="rounded-1 fit-cover h-100 w-100" src="{{i.img.url}}" alt="" /></a>
                </div>
              {% endfor %}
            </div>
            <div class="swiper-nav">
              <div class="swiper-button-next swiper-button-white"></div>
              <div class="swiper-button-prev swiper-button-white"></div>
            </div>
          </div>
        </div>
      </div>
      <div class="col-lg-6">
        <h5>{{product.name}}</h5>
        <a class="fs--1 mb-2 d-block" href="#!">{{product.subcategories.name}}</a>
        <div class="fs--2 mb-3 d-inline-block text-decoration-none">
        </div>
        <p class="fs--1">
          {{product.description | capfirst}}
        </p>
        <h4 class="d-flex align-items-center">
          <span class="text-warning me-2">${{product.price}}</span>
          <!-- <span class="me-1 fs--1 text-500">
            <del class="me-1">$2400</del>
            <strong>-50%</strong>
          </span> -->
        </h4>
        <p class="fs--1 mb-1"> <span>Costo de env칤o: </span><strong>${{product.shipping_price}}</strong></p>
        <p class="fs--1">
          Stock:
            {% if product.quanty > 0 %} 
              <strong class="text-success">Disponible</strong>
            {% else %}
              <strong class="text-danger">Agotado</strong>
            {% endif %}
        </p>
        <!-- <p class="fs--1 mb-3">
          Tags: 
          <a class="ms-2" href="#!">Computer,</a>
          <a class="ms-1" href="#!">Mac Book,</a>
          <a class="ms-1" href="#!">Mac Book Pro,</a>
          <a class="ms-1" href="#!">Laptop </a>
        </p> -->
        <div class="row">
          <div class="col-auto pe-0">
            <div class="input-group input-group-sm" data-quantity="data-quantity">
              <button class="btn btn-sm btn-outline-secondary border-300" data-field="input-quantity" data-type="minus">-</button>
              <input class="form-control text-center input-quantity input-spin-none quanty_product " type="number" min="0" value="0" aria-label="Amount (to the nearest dollar)" style="max-width: 50px" />
              <button class="btn btn-sm btn-outline-secondary border-300" data-field="input-quantity" data-type="plus">+</button>
            </div>
          </div>
          <div class="col-auto px-2 px-md-3">
            <a class="btn btn-sm btn-primary" href="javascript:void(0);">
              <span class="fas fa-cart-plus me-sm-2"></span>
              <span class="d-none d-sm-inline-block cart">Agregar al carrito</span>
            </a>
          </div>
        </div>
      </div>
    </div>
    <div class="row">
      <div class="col-12">
        <div class="overflow-hidden mt-4">
          <ul class="nav nav-tabs" id="myTab" role="tablist">
            <li class="nav-item">
              <a class="nav-link px-2 px-md-3" id="reviews-tab" data-bs-toggle="tab" href="#tab-reviews" role="tab" aria-controls="tab-reviews" aria-selected="false">
                Rese침as
              </a>
            </li>
          </ul>
          <div class="tab-content" id="myTabContent">
          
            <div class="tab-pane fade show active" id="tab-reviews" role="tabpanel" aria-labelledby="reviews-tab">
              <div class="row mt-3">
                <div class="col-lg-6 mb-4 mb-lg-0">
                  <div class="mb-1">
                    <span class="fa fa-star text-warning fs--1"></span>
                    <span class="ms-3 text-dark fw-semi-bold">Mejores rese침as que pizza 游뗷游땨</span>
                  </div>
                  <p class="fs--1 mb-2 text-600">por Daniela Chumbiray 췅 21 de octubre de 2022</p>
                  <p class="mb-0">
                    Normal. Nada fuera de lo com칰n. La masa decente pero la pizza no me gust칩 demasiado. Ped칤 una supreme que ven칤a con carne pero nos pusieron unos groseros pedazos de hamburguesa - seca - como topping. No me gust칩.
                  </p>

                  <hr class="my-4" />

                  <div class="mb-1">
                    <span class="fa fa-star text-warning fs--1"></span>
                    <span class="fa fa-star text-warning fs--1"></span>
                    <span class="fa fa-star text-warning fs--1"></span>
                    <span class="fa fa-star text-warning fs--1"></span>
                    <span class="fa fa-star text-warning fs--1"></span>
                    <span class="ms-3 text-dark fw-semi-bold">Buenazo 游땘</span>
                  </div>
                  <p class="fs--1 mb-2 text-600">por ElenadelaPiedra 췅 20 de octubre de 2022</p>
                  <p class="mb-0">
                    La pizza la s칰per recomiendo !! Ahora la puedes pedir por Uber eats y llega s칰per bien !! La pasta el d칤a que la ped칤 en el restaurante estaba bien.
                  </p>

                </div>
                <div class="col-lg-6 ps-lg-5">
                  <form method="post">{% csrf_token %}
                    <h5 class="mb-3">Escribe tu rese침a </h5>
                    <div class="mb-3">
                      <label class="form-label" for="formGroupNameInput">Nombre:</label>
                      <input class="form-control" id="formGroupNameInput" type="text" />
                    </div>
                    <div class="mb-3">
                      <label class="form-label" for="formGroupEmailInput">Correo Electr칩nico:</label>
                      <input class="form-control" id="formGroupEmailInput" type="email" />
                    </div>
                    <div class="mb-3">
                      <label class="form-label" for="formGrouptextareaInput">Mensaje:</label>
                      <textarea class="form-control" id="formGrouptextareaInput" rows="3"></textarea>
                    </div>
                    <button class="btn btn-primary" type="submit">Enviar</button>
                  </form>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

{% endblock %}

{% block script %}

<script>
  $(".cart").click(function(e){
    e.preventDefault()
    $.ajax({
      url:"{% url 'Add_Cart' %}",
      data:{'quanty':$(".quanty_product").val(), 'pk':'{{product.pk}}'},
      success: function(data){
        if(parseInt(data) == 0){
          $.notify("Producto eliminado", "info",{ position:"right" })
          $(".value_cart").text(data)
        }
        else{
          $.notify("Producto agregado", "success",{ position:"right" })
          $(".value_cart").text(data)
        }
      }
    })
  })
</script>

{% endblock %}












